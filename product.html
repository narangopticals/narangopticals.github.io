<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        Narang Opticals, Kashipur
    </title>
    <link rel="stylesheet" href="css/main.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '617363537143394');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=617363537143394&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0M7E1Z41TJ">
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-0M7E1Z41TJ');
    </script>
    <!-- Google tag (gtag.js) -->
</head>
<style>
    @media screen and (orientation: portrait) {
        .overlay {
            width: 22%;
            left: 40%;
            top: 20%;
        }

        .gridImg {
            aspect-ratio: 1;
            margin-top: -65px;
        }

        /*#iframeHolder {
            margin-top: -57px;
        }*/
        #prodParent {
            max-width: 85%;
        }
    }

    @media screen and (orientation: landscape) {
        .overlay {
            left: 44%;
            top: 9%;
            width: 90px;
        }

        .gridImg {
            margin-top: -67px;
        }

        #prodParent {
            max-width: 40%;
        }

        #iframeHolder {
            margin-top: 0;
        }
    }
</style>

<body id="mainBody">
    <nav id="navbar">
    </nav>
    <div id="google_translate_element" style="display:none;"></div>
    <script type="text/javascript">// <![CDATA[
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,hi',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: true
            }, 'google_translate_element');

        }// ]]></script>
    <script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <div id="prodView" style="height: 100%;width: 100%;">
        <div id="prodParent" class="grid" style="
            width: inherit;
            text-align: center;
            padding: 1%;
            display: flex;
            flex-direction: column;
            height: fit-content;
            border: 3px solid saddlebrown;
            border-radius: 3%;
            overflow: clip;
            align-items: center;
            /*max-width: 80%;*/">
            <div class="gridImg" style="  aspect-ratio: 1 / 1;
                    width: 100%;
                    visibility: visible;
                    display: flex;
                    flex-direction: row;
                        /*text-align: center;
                        aspect-ratio: 1;
                        width: 100%;
                        margin-top: -67px;;
                        display: flex;
                        flex-direction: row;*/">
                <button id=gridPrev style="min-height: 20%;
                        margin: 50% 0 30% 0;" onclick="imgSwitch('prev' , '')">&#x25C0;</button>
                <div class="imgCtrl" style="/*width: 100%;*/
                        height: 100%;  width: 100vw;">
                    <img class="overlay" style="
                            aspect-ratio: 1;
                            position: relative;
                            background: black;
                            /*transform: translateX(146%) translateY(25%);*/
                            border-radius: 50%;" src="../imgs/logo.jpg"></img>
                    <div id="iframeHolder" style="  text-align: center;
                            /*aspect-ratio: 1;*/
                            height: 80%;">

                    </div>
                </div>
                <button id="gridNext" style="min-height: 20%;
                        margin: 50% 0 30% 0;" onclick="imgSwitch('next' , '')">&#x25B6;</button>
            </div>
            <h1 class="gridTitle" style="text-align: center;
                margin: 0;
                font-size: inherit;
                font-weight:bold;
                margin: 5px 0 5px 0;"></h1>

            <div class="btnsHolder" style="display: flex;
                flex-direction: row;
                justify-content:stretch;
                width: 100%;
                height: fit-content;">
                <button class="whatsappBtn" id="gridWhatsapp" style="text-align: center;
                color: rgb(255, 255, 255);
                background: linear-gradient(#325f59,#04433b,#043f37, #043f37, #04433b, #275750);
                font-size: medium;
                padding: 10px;
                font-weight: bold;
                border: 5px solid rgb(85, 141, 191);
                margin-top: 2px;
                margin-bottom: 2px;
                border-radius: 10px;
                align-items: center;
                flex-grow: 0.8;">
                    <img src="../imgs/wa.png" style="width: 20px;
                        aspect-ratio: 1;">
                    Know More</img></button>
                <!--<button style="background:black;
                font-size:larger;
                padding: 0px;
                margin: 2px -16px 0px 6px;
                flex-grow: 0.2;">&#128722;</button>-->
                <button class="cartBtn" id="gridIdTag"
                    style="flex-grow: 0.15;
                /*padding: 2px 0px 0px 0px;
                margin: 2px 0px 0px -7px;*/
                padding: 2px;
                margin: 3px 0px 3px 3px;
                font-weight: bolder;
                min-width: 50px;
                border: 3px solid #e7e6c5;
                font-size: xx-large;
                background: linear-gradient(to bottom, rgb(55, 55, 55),rgb(22, 22, 22),rgb(0, 0, 0),rgb(22, 22, 22),rgb(55, 55, 55))">&#128722;</button>
                <button class="shareBtn" id="gridShareBtn"
                    style="/*! aspect-ratio: -0.3; */
                                        flex-grow: 0.15;
                                        /*padding: 2px 0px 0px 0px;
                                        margin: 2px 0px 0px -7px;*/
                                        padding: 1px;
                                        margin: 3px;
                                        /*! font-weight: bolder; */
                                        border: 2px solid #e7e6c5;
                                        /*! font-size: xx-large; */
                                        width: 40px;
                                        border-radius: 10px;
                                        background: linear-gradient(to bottom, rgb(35, 96, 150),rgb(11, 41, 102),rgb(16, 52, 118),rgb(11, 41, 102),rgb(35, 96, 150));
                                        /*background: linear-gradient(to bottom, rgb(45, 53, 69),rgb(48, 52, 58),rgb(36, 42, 49),rgb(48, 52, 58),rgb(45, 53, 69));*/">
                    <img id="shareIcon" src="../svg/share-button.svg" style="aspect-ratio: 1;
                            width: 60%; margin:5px; padding: 5px"></img>

                </button>
            </div>
        </div>
    </div>
    <!--<div id="btnNavProdView2" style="width: 85%;
            align-items: center;
            text-align: center;
            padding:1%;
            height: 100%;"></div>-->

    <!--<script type="module">
        import { Func, loadItems } from "./js/productsLoad.js";
        window.Func = Func;
        window.loadItems = loadItems;
        //window.text = text;
        //window.Func(1);
        switchSection(0);
    </script>-->
    <script type="module">
        import { navLoader, toggle, navScroll, switchTheme, loadThemeBtn } from "./js/navload.js";
        import { browserDetect } from "./js/general.js";
        browserDetect();
        window.navLoader = navLoader;
        window.toggle = toggle;
        navLoader('menuBtns', 0, 'Products');

        window.switchTheme = switchTheme;
        window.onscroll = navScroll;
        window.matchMedia("(orientation:portrait)").addEventListener("change", function (e) {
            //console.log('Orientation change' + e);
            location.reload();
        });
        import { setLanguage, createnavSelector, preventGooglePops } from './js/language.js';
        window.setLanguage = setLanguage;
        window.document.body.onload = () => {
            loadThemeBtn();
            createnavSelector();
            preventGooglePops(true);
        };
    </script>
    <script type="module">
        import { checkOutLater, } from '/js/productsLoad.js';
        window.checkOutLater = checkOutLater;
        checkOutLater(null, null);
    </script>
    <script>
        grabUrlProd();

        window.matchMedia("(orientation:portrait)").addEventListener("change", function (e) {
            //console.log('Orientation change' + e);
            location.reload();
        });

        function grabUrlProd() {
            const searchParams = new URLSearchParams(window.location.search);
            if (searchParams.has('type') && searchParams.has('itemnum')) {
                var fetchFile = searchParams.get('type');
                //console.log(fetchFile);
                var itemnum = searchParams.get('itemnum');
                //console.log(itemnum);
                if (fetchFile == "frames") {
                    //console.log("framesLoading");
                    framesDataFetch(itemnum);
                } else if (fetchFile == "sunglass") {
                    //console.log("sunglassLoading");
                    sunglassDataFetch(itemnum);
                } else if (fetchFile == "lens") {
                    //console.log("lensLoading");
                    lensDataFetch(itemnum);
                } else if (fetchFile == "bluefilter") {
                    //console.log("bluefilterLoading");
                    blueFilterDataFetch(itemnum);
                } else if (fetchFile == "readymade") {
                    //console.log("readymadeLoading");
                    readymadeDataFetch(itemnum);
                } else if (fetchFile == "watch") {
                    watchDataFetch(itemnum);
                }
            }
        }
        async function readymadeDataFetch(itemnum) {
            var data;
            try {
                var results = fetch('https://api.github.com/gists/2999fc336989306ae76d3e11611c44fe').then(results => {
                    return results.json();
                });
                data = await results.then(data => {
                    return data.files["prodRdyData.json"].content;
                });
                setTimeout(data = JSON.parse(data), 3000);
            } catch (error) {
                window.alert(error);
                /*data = fetch('../json/prodFmData.json').then(results => {
                    return results.json();
                });*/
            }
            if (data != undefined || data.length > 0) {
                str = Object.values((await data).valueOf("data"))[0];
                if (str.length > 0) {
                    for (var j = 0; j < str.length; j++) {
                        var item = str[j];
                        if (item.itemnum == itemnum) {
                            loadItem(item);
                        }
                    }
                }
            }
        }
        async function framesDataFetch(itemnum) {
            var data;
            try {
                var results = fetch('https://api.github.com/gists/ea3f7fa9a39a62872983e2b813441d53').then(results => {
                    return results.json();
                });
                data = await results.then(data => {
                    return data.files["prodFmData.json"].content;
                });
                setTimeout(data = JSON.parse(data), 3000);
            } catch (error) {
                window.alert(error);
                data = fetch('../json/prodFmData.json').then(results => {
                    return results.json();
                });
            }
            if (data != undefined || data.length > 0) {
                str = Object.values((await data).valueOf("data"))[0];
                if (str.length > 0) {
                    for (var j = 0; j < str.length; j++) {
                        var item = str[j];
                        if (item.itemnum == itemnum) {
                            loadItem(item);
                        }
                    }
                }
            }
        }
        async function sunglassDataFetch(itemnum) {
            var data;
            try {
                var results = fetch('https://api.github.com/gists/8fef5a38ff904a0c42df470064dda3f9').then(results => {
                    return results.json();
                });
                data = await results.then(data => {
                    return data.files["prodSgData.json"].content;
                });
                setTimeout(data = JSON.parse(data), 3000);
            } catch (error) {
                window.alert(error);
                data = fetch('../json/prodSgData.json').then(results => {
                    return results.json();
                });
            }
            if (data != undefined || data.length > 0) {
                str = Object.values((await data).valueOf("data"))[0];
                if (str.length > 0) {
                    for (var j = 0; j < str.length; j++) {
                        var item = str[j];
                        if (item.itemnum == itemnum) {
                            loadItem(item);
                        }
                    }
                }
            }
        }

        async function lensDataFetch(itemnum) {
            var data;
            try {
                var results = fetch('https://api.github.com/gists/2a9920dd79543db4549056de07cc83e7').then(results => {
                    return results.json();
                });
                data = await results.then(data => {
                    return data.files["prodLnsData.json"].content;
                });
                setTimeout(data = JSON.parse(data), 3000);
            } catch (error) {
                window.alert(error);
                data = fetch('../json/prodLnsData.json').then(results => {
                    return results.json();
                });
            }
            if (data != undefined || data.length > 0) {
                str = Object.values((await data).valueOf("data"))[0];
                if (str.length > 0) {
                    for (var j = 0; j < str.length; j++) {
                        var item = str[j];
                        if (item.itemnum == itemnum) {
                            loadItem(item);
                        }
                    }
                }
            }
        }
        async function watchDataFetch(itemnum) {
            var data;
            try {
                var results = fetch('https://api.github.com/gists/a54c544dee909008b0cb98db283c9f64').then(results => {
                    return results.json();
                });
                data = await results.then(data => {
                    return data.files["prodWatchData.json"].content;
                });
                setTimeout(data = JSON.parse(data), 3000);
            } catch (error) {
                window.alert(error);
                /*data = fetch('../json/prodLnsData.json').then(results => {
                    return results.json();
                });*/
            }
            if (data != undefined || data.length > 0) {
                str = Object.values((await data).valueOf("data"))[0];
                if (str.length > 0) {
                    for (var j = 0; j < str.length; j++) {
                        var item = str[j];
                        if (item.itemnum == itemnum) {
                            loadItem(item);
                        }
                    }
                }
            }
        }
        async function loadItem(item) {
            var prodMain = document.getElementById("prodView");
            var iframeHolder = prodMain.querySelector('#iframeHolder');
            var imgs = item.imgfile;
            var ilen = imgs.length;
            iframeHolder.value = 0;
            if (ilen > 0) {
                var imgs = item.imgfile;
                iframeHolder.style.display = "";
                iframeHolder.innerHTML = "";
                for (var i = 0; i < ilen; i++) {
                    iframeHolder.innerHTML += "<iframe style=\"height: 100%;width: 100%;\" id=\"iframe" + i + "\" src=\"https://drive.google.com/file/d/" + imgs[i] + "/preview\"></iframe>";
                }
                imgSwitch('', 0);
                /*prodMain.querySelector('.gridImg').style.display = "";
                prodMain.querySelector('.gridImg').src = item.imgfile;*/
            } else {
                iframeHolder.style.display = "none";
            }

            var details = "";
            /**Cost:OFF
             * if (item.cost.length > 0) {
                details += "<span>Rs." + item.cost + "</span>";
            }**/
            if (item.title.length > 0) {
                details += "<br><span>Title : " + item.title.replaceAll('/e', '') + "</span>";
            }
            if (item.dscrpt.length > 0) {
                details += "<br><br><span>Description:<br><br>" + item.dscrpt + "<br></span>";
            }
            prodMain.querySelector('.gridTitle').innerHTML = details;
            var crtBtn = prodMain.querySelector('.cartBtn');
            if (crtBtn != undefined) {

                crtBtn.value = item.itemnum;

                window.checkOutLater(crtBtn, null);
                crtBtn.addEventListener("click",
                    function (e) {
                        window.checkOutLater(null, e.target);
                    });
            }
            var shareBtn = prodMain.querySelector('.shareBtn');
            if (shareBtn != undefined) {
                shareBtn.value = window.href;
                //console.log(window.href);
                shareBtn.addEventListener("click",
                    function (e) {
                        window.navigator.clipboard.writeText(window.location.href);

                        // Alert the copied text
                        window.alert("Current Page Copied Link: \n" + window.location.href);
                    });
            }
        }
        function imgSwitch(func, setItem) {
            var iframeHolder = window.document.querySelector('#iframeHolder');
            var frames = iframeHolder.querySelectorAll('iframe');
            var lenIframes = frames.length;
            var current = Number.parseInt(iframeHolder.value);
            if (setItem.length == 0) {
                if (func.trim() == "prev") {
                    if (current == 0) {
                        setItem = lenIframes - 1;
                    } else if (current > 0) {
                        setItem = current - 1;
                    }
                } else {
                    if (current == lenIframes - 1) {
                        setItem = 0;
                    } else if (current < lenIframes - 1) {
                        setItem = current + 1;
                    }
                }
            }
            if (setItem > -1 && setItem < lenIframes) {
                iframeHolder.value = setItem;
                for (var i = 0; i < lenIframes; i++) {
                    frames[i].style.display = "none";
                    if (i == setItem) {
                        frames[i].style.display = "";
                    }
                }
            }
        }
    </script>
</body>

</html>