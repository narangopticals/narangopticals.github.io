<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        Narang Opticals, Kashipur
    </title>
    <link rel="stylesheet" href="css/main.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '617363537143394');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=617363537143394&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->
</head>

<body id="mainBody">
    <nav id="navbar">
    </nav>
    <div id="google_translate_element" style="
    margin: 5px 2px 0 0;"></div>
    <script type="text/javascript">// <![CDATA[
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,hi',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: true
            }, 'google_translate_element');

        }// ]]></script>
    <script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <div style="width: 100%; height:fit-content; text-align:center; margin: 0.5%;">
        <button id="filter" style="font-weight: bold;" onclick="processFilter()">Filter</button>
        <button class="slideName" style="font-weight: bold;" onclick="switchSection(0)">Eyewear Frame</button>
        <button class="slideName" style="font-weight: bold;" onclick="switchSection(1)">Sunglass</button>
        <button class="slideName" style="font-weight: bold;" onclick="switchSection(2)">Lens</button>
    </div>

    <div id="btnNavProdView" style="width: 85%;
            align-items: center;
            text-align: center;
            padding:1%;
            height: 100%;"></div>
    <div id="filterView" style="display: none;
        top: 10%;
        width: fit-content;
        height: fit-content;
        background: #8e8e8e;
        z-index: 1000;
        margin: 0 2px 0 2%;
        position: sticky;
        padding: 1px 2px 1px 2px;"></div>
    <div id="mainProdView" style="height: 100%;">

    </div>
    <div id="btnNavProdView2" style="width: 85%;
            align-items: center;
            text-align: center;
            padding:1%;
            height: 100%;"></div>
    <div id="cartFloat">
        <button id="cartExpand" onclick="openWindow()">&#128722;<span id='cartCounter'>0</span>
        </button>
        <div id="cartViewMini">

        </div>
    </div>
    <script type="module">
        import { setHigh, setLow, setKeys, Func, loadItems, checkOutLater, imgSwitch } from "./js/productsLoad.js";
        window.Func = Func;
        window.loadItems = loadItems;
        window.checkOutLater = checkOutLater;
        window.imgSwitch = imgSwitch;
        window.setKeys = setKeys;
        window.setLow = setLow;
        window.setHigh = setHigh;
        //window.text = text;
        //window.Func(1);
        switchSection(0);

    </script>
    <script type="module">
        import { navLoader, toggle, navScroll } from "./js/navload.js";
        import { browserDetect } from "./js/general.js";
        browserDetect();
        window.navLoader = navLoader;
        window.toggle = toggle;
        navLoader('menuBtns', 0, 'HomePage');
        window.onscroll = navScroll;
    </script>
    <script>
        function openWindow() {
            window.open("/cart.html", "_blank");
        }
        var currentSection = 1;
        function switchSection(section) {
            if (currentSection != section) {
                let slideName = document.getElementsByClassName("slideName");
                for (i = 0; i < slideName.length; i++) {
                    slideName[i].className = slideName[i].className.replace("active", "");
                    slideName[i].textContent = slideName[i].textContent.replace("*", "");
                    slideName[i].title = "Click To Switch"
                }
                slideName[section].className += " active";
                slideName[section].textContent += "*";
                slideName[section].title = "Currently Open";
                currentSection = section;
                clearFilterView()
                //Func(section);
            }
        }
        async function processFilter() {
            if (currentSection == 0) {
                var filterView = window.document.getElementById('filterView');
                filterView.style.display = 'block';
                var view = await fetch("/class/filterView.html").then((res) => {
                    return res.text();
                });
                filterView.innerHTML = view;
            }
        }
    </script>
    <!--<script type="text/javascript">
        console.log("window.scrollY" + window.scrollY);
        var prevScrollpos = window.scrollY;
        window.addEventListener("scroll", (event) => {
            //window.onscroll = (event) => {
            console.log(event);
            console.log(prevScrollpos);
            var currentScrollPos = window.scrollY;
            console.log(currentScrollPos);
            if (prevScrollpos > currentScrollPos) {
                document.getElementById("logoHeader").style.display = "";
                console.log("logoHeader visible");
            } else {
                document.getElementById("logoHeader").style.display = "none";
                console.log("logoHeader Hidden");
            }
            prevScrollpos = currentScrollPos;
        });
    </script>-->
    <script type="module">
        import { setCookie, filterKeys } from "/js/general.js"
        window.filterKeys = filterKeys;
        window.setCookie = setCookie;
    </script>
    <script type="text/javascript">
        var lowCost = null;
        var highCost = null;
        var keys = null;
        function setValueHigh() {
            var maxLabel = window.document.getElementById('maxRange');
            //var minLabel = window.document.getElementById('minRange');
            var input_maxCost = window.document.getElementById('costHigh');
            highCost = input_maxCost.value;
            maxLabel.innerHTML = "Cost Maximum: " + highCost;
        }
        function setValueLow() {
            var maxLabel = window.document.getElementById('minRange');
            //var minLabel = window.document.getElementById('minRange');
            var input_minCost = window.document.getElementById('costLow');
            lowCost = input_minCost.value;
            maxLabel.innerHTML = "Cost Minimum: " + lowCost;
        }
        function closeFilterView() {
            highCost = null;
            lowCost = null;
            var filterView = window.document.getElementById('filterView');
            filterView.style.display = 'none';
        }
        function clearFilterView() {
            highCost = null;
            lowCost = null;
            keys = null;
            var filterView = window.document.getElementById('filterView');
            filterView.style.display = 'none';
            setHigh(highCost);
            setLow(lowCost);
            setKeys(keys);
            Func(currentSection);
        }
        function submitFilter() {
            keys = new filterKeys();
            keys.pattern = document.getElementById("pattern").value;
            keys.front = document.getElementById("front").value;
            keys.side = document.getElementById("side").value;
            keys.opacity = document.getElementById("opacity").value;
            keys.resistance = document.getElementById("resistance").value;
            keys.joint = document.getElementById("joint").value;
            keys.surfacing = document.getElementById("surfacing").value;
            /*var string =
                "pattern=" + document.getElementById("pattern").value + "," +
                "front=" + document.getElementById("front").value + "," +
                "side=" + document.getElementById("side").value + "," +
                "opacity=" + document.getElementById("opacity").value + "," +
                "resistance=" + document.getElementById("resistance").value + "," +
                "joint=" + document.getElementById("joint").value + "," +
                "surfacing=" + document.getElementById("surfacing").value;
            setCookie("keys", string, 10);*/
            setHigh(highCost);
            setLow(lowCost);
            var filterView = window.document.getElementById('filterView');
            filterView.style.display = 'none';
            console.log("keys =");
            console.log(keys);
            setKeys(keys);
            Func(currentSection);
        }
        function setSolid() {
            //document.getElementById("opacity").value = "solid";
            var childs = document.getElementById("opacity").querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                if (elem.value == 'solid') {
                    console.log("elem.value == 'solid'");
                    elem.disabled = false;
                } else {
                    elem.disabled = true;
                }
            }
            setpattern();
            setjoint();
            setsurfacing();
            console.log(document.getElementById("pattern"));
        }
        function setsurfacing() {
            //document.getElementById("surfacing").value = "shine";
            var childs = document.getElementById("surfacing").querySelectorAll('option');
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                if (elem.value == 'matt') {
                    elem.disabled = true;
                    //console.log("elem.value == 'solid'");
                } else {
                    elem.disabled = false;
                }
            }

            console.log(document.getElementById("surfacing"));
        }
        function setpattern() {
            //document.getElementById("opacity").value = "solid";
            var childs = document.getElementById("pattern").querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                if (elem.value == 'halfshade') {
                    elem.disabled = true;
                    //console.log("elem.value == 'solid'");
                } else {
                    elem.disabled = false;
                }
            }

            console.log(document.getElementById("opacity"));
        }
        function setjoint() {
            //document.getElementById("joint").value = "solid";
            var childs = document.getElementById("joint").querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                if (elem.value == 'plastic') {
                    elem.disabled = true;
                    //console.log("elem.value == 'solid'");
                } else {
                    elem.disabled = false;
                }
            }

            console.log(document.getElementById("joint"));
        }
        function unsetSolid() {
            document.getElementById("opacity").value = "";
            var childs = document.getElementById("opacity").querySelectorAll('option');
            //console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i].disabled = false;
            }
            console.log(document.getElementById("opacity"));
            unsetpattern();
            unsetjoint();
            unsetsurfacing();
        }

        function unsetsurfacing() {
            document.getElementById("surfacing").value = "";
            var childs = document.getElementById("surfacing").querySelectorAll('option');
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                elem.disabled = false;
            }

            console.log(document.getElementById("surfacing"));
        }
        function unsetpattern() {
            document.getElementById("pattern").value = "";
            var childs = document.getElementById("pattern").querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                elem.disabled = false;
            }

            console.log(document.getElementById("pattern"));
        }
        function unsetjoint() {
            document.getElementById("joint").value = "";
            var childs = document.getElementById("joint").querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                elem.disabled = false;

            }

            console.log(document.getElementById("joint"));
        }
        function unsetAll() {
            var childs = document.querySelectorAll('option');
            console.log(childs);
            for (var i = 0; i < childs.length; i++) {
                var elem = childs[i];
                console.log(elem);
                elem.disabled = false;
                elem.parentNode.value = "";
            }
        }
    </script>
</body>

</html>